\section{Preliminaries}
\subsection{Notation}
Let $\mathcal{S}=\{\{\{\mathcal{S}_{(i,j,k)}\}_{k\in\mathcal{I}_{K}(i,j)}\}_{j\in\mathcal{I}_{J}(i)}\}_{i\in\mathcal{I}_I}$, $\mathcal{S}\subseteq\real^n$ be a nested collection of subsets of the $n$-dimensional, real-valued numbers. The first and second level sub-collections are denoted as $\mathcal{S}_{(i)}=\{\{\mathcal{S}_{(i,j,k)}\}_{k\in\mathcal{I}_{K}(i,j)}\}_{j\in\mathcal{I}_{J}(i)}$ and $\mathcal{S}_{(i,j)}=\{\mathcal{S}_{(i,j,k)}\}_{k\in\mathcal{I}_{K}(i,j)}$. Operations preformed between nested collections require the collections be of equal size and are preformed elementwise. For example, $\mathcal{S}_{(i)}$ equals $\tilde{\mathcal{S}}_{(i)}$ if they are the same size and every element in both are equivalent. Operations preformed between a nested collection and a single element behave as if the single element where an appropriate sized collection with elements equal to the single element. For example, setting $\mathcal{S}=\underline{0}$ sets every element of $\mathcal{S}$ to $\underline{0}$. Finally, union operations are preformed on every element of the nested collection. For example, $\cup \mathcal{S}_{(i)}$ is the union of all the elements of $\mathcal{S}_{(i)}$.

A directed graph, $\mathcal{G}$, is composed of nodes, $\mathfrak{N}$, edges, $\mathfrak{E}$, and labels, $\mathfrak{L}$. Each node is assigned a single, constant label from $\mathfrak{L}$. The label of a node is given by $L:\mathfrak{N}\rightarrow\mathfrak{L}$, and the set of 1-step reachable nodes from a node is given by $R:\mathfrak{N}\rightarrow\mathcal{P}(\mathfrak{N})$ where $\mathcal{P}(\cdot)$ represents the power set. Finally, a function is said to respect $\mathcal{G}$ if it maps to elements of $\mathfrak{N}$ and evolves along elements of $\mathfrak{E}$. The set of all functions respecting a graph is denoted $\Sigma(\mathcal{G})$. 

\subsection{Set Operations}
Set operations provide tools to analyze how a system can evolve under allowable inputs. Given a disturbed linear system with state and input constraints, $\mode{\modeidx}\triangleq\{A_\modeidx, B_\modeidx, E_\modeidx,\xcon[\modeidx],\ucon[\modeidx]\}$ where $x(t+1)=A_\modeidx x(t)+ B_\modeidx u(t)+ E_\modeidx w(t)$, the following important set operations are introduced. 
\begin{definition}[Robust Preset]
The $k$-step, robust preset of a set $\mathcal{S}$ under the constrained dynamics $\mode{\modeidx}$ and disturbance $w\in\wcon$ is given by
\begin{align}
\Pre[\modeidx][0]{\mathcal{S},\wcon}&\triangleq\mathcal{S},\\
\Pre[\modeidx][k]{\mathcal{S},\wcon}&\triangleq\{x\in\xcon\ |\ \exists u\in\ucon\text{ s.t. }\forall w\in\wcon,\nonumber\\ &A_\modeidx x+ B_\modeidx u+ E_\modeidx w\in\Pre[\modeidx][k-1]{\mathcal{S},\wcon}\}.
\end{align}
\end{definition}
\begin{definition}[Previewed Robust Preset]
The $k$-step, previewed robust preset of a set $\mathcal{S}$ under the constrained dynamics $\mode{\modeidx}$ and disturbance $w\in\wcon$ is given by
\begin{align}
\PreviewedPre[\modeidx][0]{\mathcal{S},\wcon}&\triangleq\mathcal{S},\\
\PreviewedPre[\modeidx][k]{\mathcal{S},\wcon}&\triangleq\{x\in\mathcal{X}|\forall w\in\mathcal{W},\exists u\in\mathcal{U}\text{ s.t. }\nonumber\\
&A_\modeidx x+ B_\modeidx u+ E_\modeidx w\in\PreviewedPre[\modeidx][k-1]{\mathcal{S},\wcon}\}.
\end{align}
\end{definition}
The previewed robust preset is a superset or equal to the standard robust presets.  They can be found using basic set operation such as the Minkowski sum and difference as shown below \cite{Borrelli2017}.
\begin{align}
\Pre[][1]{\mathcal{S}} &= \left(\left(\left(\mathcal{S}\ominus A_w\circ\mathcal{W}\right)\oplus\left(-B\circ\mathcal{U}\right)\right)\circ A\right)\ \cap\ \mathcal{X},\\
\PreviewedPre[][1]{\mathcal{S}} &= \left(\left(\left(\mathcal{S}\oplus\left(-B\circ\mathcal{U}\right)\right)\ominus A_w\circ\mathcal{W}\right)\circ A\right)\ \cap\ \mathcal{X}.
\end{align}

\subsection{Feasibility Analysis}
In constrained systems, it is critically important that the controller can satisfy the state constraints using only feasibly inputs. If a feasible input exists such that the resulting state is also feasible, the system is feasible. If feasibility at the current time implies feasibility at all future times, then the system is persistently feasible.

One way to ensure persistent feasibility is by constraining the system to be within a control invariant set that is a subset of the state constraints. Since the definition of control invariance implies that a feasible input exists that will keep the system in the set if it starts in the set, then at least this single input, and possibly others, can serve as a feasible input. This will continue for all time establishing persistent feasibility. 

Relying on constant, control invariant sets become difficult in externally switched systems, however. The set must be common to all system modes are persistent feasibility is lost. This concern can be addressed using time varying, control invariant sets that take advantage of constraints on the switching signal. For example, in \cite{Danielson2019,Santis2004}, time varying, control invariant sets where developed that force the system to move during the minimum dwell time to a region that will be safe for any successor mode.

The ideas presented in the previous literature can be described using the concepts of safe-set collections. These are collections of sets, indexed by some time varying signal, that serve as the active state constraints of the system. To establish persistent feasibility, they require that every set is within the 1-step preset of all possible successor sets. This is presented formally in the following definition.
\begin{definition}[External Switching Signal]
An external switching signal respecting the graph, $\mathcal{G}(\mathfrak{N},\mathfrak{E},\{1,...,\nummodes\})$ is denoted $\ss^\mathcal{G}\in\Sigma(\mathcal{G})$. The current label of a switching signal is denoted $\ss(t)\triangleq L(\ss^\mathcal{G}(t))$.
\end{definition}
\begin{definition}[Safe-set collection]
Let the external switching signal, $\ss^\mathcal{G}\in\Sigma(\mathcal{G})$ govern the system $\mode{}(t)=\{f_{\ss(t)}(x(t),u(t)),\xcon[\ss(t)],\ucon[\ss(t)]\}$. A collection of sets indexed by the nodes of $\mathcal{G}$, $\mathcal{S}=\{\mathcal{S}_{n}\}_{n\in\mathfrak{N}}$ is a safe-set collection if
$$\mathcal{S}_{n}\subseteq\Pre[L(n^+)][1]{\mathcal{S}_{n^+}}\ \forall\ n^+\in R(n)$$
\end{definition}
Safe set collections create target sets for the system to move into at each time step. The preset condition ensures that, no matter how $\ss^\mathcal{G}$ evolves, the system will always be able to find a feasible input to move into the current target set.
